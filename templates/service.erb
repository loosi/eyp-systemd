[Unit]
<% if defined?(@description) -%>
Description = <%= @description %>
<% end -%>
<% if defined?(@after) -%>
After=<%= @after %>
<% end -%>
<% if @wants.any? -%>
Wants=<%= @wants.join(' ') %>
<% end -%>
<% if @after_units.any? -%>
After=<%= @after_units.join(' ') %>
<% end -%>
<% if @before_units.any? -%>
Before=<%= @before_units.join(' ') %>
<% end -%>
<% if @conflicts.any? -%>
Conflicts=<%= @conflicts.join(' ') %>
<% end -%>
<% if @requires.any? -%>
Requires=<%= @requires.join(' ') %>
<% end -%>

[Service]
ExecStart=<%= @execstart %>
<% if defined?(@execstop) -%>
ExecStop=<%= @execstop %>
<% end -%>
<% if defined?(@execreload) -%>
ExecReload=<%= @execreload %>
<% end -%>
Restart=<%= @restart %>
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=<%= @servicename %>
User=<%= @user %>
Group=<%= @group %>
<% if @forking -%>
Type=forking
<% end -%>
<% if defined?(@pid_file) -%>
PIDFile=<%= @pid_file %>
<% end -%>
<% if defined?(@remain_after_exit) -%>
RemainAfterExit=<%= scope.function_bool2yesno([@remain_after_exit]) %>
<% end -%>
<% if defined?(@type) -%>
Type=<%= @type %>
<% end -%>
<% if defined?(@env_vars) -%>
<%   @env_vars.each do |env| -%>
Environment=<%= env %>
<%   end -%>
<% end -%>
<% if defined?(@working_directory) -%>
WorkingDirectory=<%= @working_directory %>
<% end -%>
<% if defined?(@execstart_pre) -%>
ExecStartPre=<%= @execstart_pre %>
<% end -%>
[Install]
WantedBy=<%= @wantedby.join(' ') %>
<% if @requiredby.any? -%>
RequiredBy=<%= @requiredby.join(' ') %>
<% end -%>
